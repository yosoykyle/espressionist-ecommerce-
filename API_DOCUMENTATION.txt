📋 Complete API Documentation for Espressionist E-commerce

🛍️ Product Endpoints

1. Get All Products
   📍 Route: /api/products
   🔁 Method: GET
   🧾 Request: No parameters needed
   📦 Response: Array of Product objects
   \[{
   "id": number,
   "name": string,
   "price": number,
   "quantity": number,
   "category": string,
   "archived": boolean
   }]
   🔐 Auth: Not required
   ❌ Errors: 500 for server errors
2. Get Product Image
   📍 Route: /api/products/image/{id}
   🔁 Method: GET
   🧾 Request: URL parameter id
   📦 Response: Binary image data (JPEG)
   🔐 Auth: Not required
   ❌ Errors: 404 if image not found
3. Upload Product Image
   📍 Route: /api/products/upload-image/{id}
   🔁 Method: POST
   🧾 Request: Multipart form data with image field
   📦 Response: 204 No Content
   🔐 Auth: Admin only
   ❌ Errors: 400 for invalid image
   🛒 Order Endpoints
4. Create Order (Checkout)
   📍 Route: /orders/checkout
   🔁 Method: POST
   🧾 Request:
   {
   "customerName": string,
   "shippingAddress": string,
   "orderItems": \[{
   "productId": number,
   "quantity": number
   }]
   }
   📦 Response:
   {
   "customerName": string,
   "items": array,
   "shippingAddress": string,
   "totalWithVAT": number,
   "orderCode": string,
   "message": "Please save this code to track your order."
   }
   🔐 Auth: Not required
   ❌ Errors: 400 for invalid order data
5. Get Order Status
   📍 Route: /orders/order-status/{orderCode}
   🔁 Method: GET
   🧾 Request: URL parameter orderCode
   📦 Response: Order object with status
   🔐 Auth: Not required
   ❌ Errors: 404 if order not found
6. Update Order Status (Admin)
   📍 Route: /orders/update-status/{id}
   🔁 Method: PUT
   🧾 Request: URL parameter id, query parameter status
   📦 Response: 204 No Content
   🔐 Auth: Admin only
   ❌ Errors: 404 if order not found
   👤 Admin Endpoints
7. Admin Login
   📍 Route: /admin/login
   🔁 Method: POST
   🧾 Request: Form data with username and password
   📦 Response: Redirects to /admin/dashboard on success
   🔐 Auth: Not required (login endpoint)
   ❌ Errors: Redirects back with error param
8. Get All Admins
   📍 Route: /admin/all
   🔁 Method: GET
   📦 Response: Array of Admin objects
   🔐 Auth: Admin only
   ❌ Errors: 401/403 if unauthorized
9. Create Admin
   📍 Route: /admin/create
   🔁 Method: POST
   🧾 Request: Admin object
   📦 Response: Created Admin object
   🔐 Auth: Admin only
   ❌ Errors: 400 for invalid data
10. Delete Admin
    📍 Route: /admin/delete/{id}
    🔁 Method: DELETE
    🧾 Request: URL parameter id, query parameter currentUsername
    📦 Response: 204 No Content
    🔐 Auth: Admin only
    ❌ Errors: 400 if trying to delete self
    🔐 Authentication Details
    Admin Authentication:

Uses Spring Security Form-based authentication
Default credentials:
Username: ADMIN
Password: Espressionist2025
Session-based (cookie)
Protected routes: All /admin/\*\* paths
CSRF Protection:

Spring Security's CSRF protection is enabled
For POST/PUT/DELETE requests, include the CSRF token
Token is available in Thymeleaf forms as: \${\_csrf.token}
🌐 CORS & Security
Based on the SecurityConfig, the setup is:

Public endpoints (no auth required):

/products/\*
/orders/checkout
/orders/order-status/\*
/ (home)
/cart
/checkout
Protected endpoints (admin auth required):

/admin/\*\*
All product management endpoints
Order status updates
🧪 Testing Notes
Test Data:

Use the default admin credentials for admin features
Create test products via admin interface
Order codes format: ESP- followed by 8 characters
Frontend Testing:

Test cart functionality with localStorage
Validate checkout form fields
Test order status lookup
Test admin product management
💡 Thymeleaf Integration Tips
Products Page:

Access products: \${products}
Image URLs: /api/products/image/{id}
Product properties: \${product.name}, \${product.price}, etc.
Order Status Page:

Order details: \${order}
Order items: \${order.orderItems}
Status: \${order.status}
Admin Pages:

CSRF token: \${\_csrf.token}
Error messages: \${error}
Success messages: \${success}
Layout Templates:

Base layout: base.html
Admin layout: admin-base.html

☕ Espressionist E-Commerce – Backend Requirements
🔧 Technologies:
Java 17 + Spring Boot

MySQL/MariaDB (via Docker)

Thymeleaf (for rendering views)

Spring Security (admin login only)

HTML, Tailwind CSS, JS (static pages only)

✅ GENERAL GUIDELINES
Focus on backend.

Frontend only needs basic integration with Thymeleaf (static templates).

Use archived = true instead of deleting records.

Project runs in GitHub Codespaces.

🛍️ USER SIDE (No Login Required)

1. Product Listing
   /products — Return all products where archived = false

Includes: image, name, price, stock quantity

2. Shopping Cart
   Cart is handled in JavaScript only

At checkout, cart data (productId + quantity) will be sent to backend

3. Checkout
   POST /checkout

Required fields:

Name

Email

Shipping Address

Cart Items (product ID + quantity)

Add 12% VAT to total

Save order and items in database

4. Payment
   Only Cash on Delivery

No payment gateway required

5. Order Confirmation (No Email)
   After checkout, show in-browser confirmation page with:

* Order code (e.g. ESP-3A9KZT1D)
* Item details
* Shipping info
* Total (with VAT)
* Message: “Please save this code to track your order.”

6. Order Status Tracking
   /order-status/{orderCode}

Display:

Order date

Item list

Shipping info

Status (Pending, Processing, etc.)

🔐 ADMIN SIDE (Login Required)
Login Credentials (Default):
Username: ADMIN

Password: Espressionist2025

1. Authentication
   Use Spring Security

Protect /admin/\*\* routes

Use BCrypt for password hashing

Allow creation/deletion/update of other admins (prevent self-deletion)

2. Product Management
   Create, update, archive products

Fields:

Name

Price (> 0)

Quantity (≥ 1)

Category

Image (stored in DB as BLOB or saved to file)

Deletion = set archived = true

3. Order Management
   View customer orders:

Name, email, shipping address

Items ordered

Total with VAT

Status

Admin can manually update status (Pending → Shipped, etc.)

Once marked as delivered, option to "complete" order (archives it)

4. Admin Account Management
   Admins can manage other admins

Prevent self-deletion for safety

🧱 DATABASE DESIGN
Use JPA (Hibernate) annotations

Entity: Product, Order, OrderItem, Admin

Relationships:

One Order → Many OrderItems

Each OrderItem links to a Product

Add archived: boolean to deletable records