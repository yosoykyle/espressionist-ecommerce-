<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/base :: html(~{::section})}">
<body>
    <section>
        <h1 class="text-3xl font-bold text-coffee mb-8">Order Status</h1>

        <div th:if="${order}" class="bg-white rounded-lg shadow-md p-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Order Details -->
                <div>
                    <h2 class="text-xl font-semibold mb-4">Order Details</h2>
                    <div class="space-y-2">
                        <p><span class="font-semibold">Order Code:</span> <span th:text="${order.orderCode}"></span></p>
                        <p><span class="font-semibold">Order Date:</span> <span th:text="${#dates.format(order.orderDate, 'MMM dd, yyyy')}"></span></p>
                        <p><span class="font-semibold">Status:</span> 
                            <span th:class="${'inline-block px-2 py-1 rounded ' + 
                                (order.status == 'PENDING' ? 'bg-yellow-100 text-yellow-800' : '') +
                                (order.status == 'PROCESSING' ? 'bg-blue-100 text-blue-800' : '') +
                                (order.status == 'SHIPPED' ? 'bg-purple-100 text-purple-800' : '') +
                                (order.status == 'DELIVERED' ? 'bg-green-100 text-green-800' : '') +
                                (order.status == 'CANCELLED' ? 'bg-red-100 text-red-800' : '')}"
                                th:text="${order.status}">
                            </span>
                        </p>
                    </div>

                    <h3 class="text-lg font-semibold mt-6 mb-2">Shipping Information</h3>
                    <div class="space-y-2">
                        <p><span class="font-semibold">Name:</span> <span th:text="${order.customerName}"></span></p>
                        <p><span class="font-semibold">Email:</span> <span th:text="${order.customerEmail}"></span></p>
                        <p><span class="font-semibold">Address:</span> <span th:text="${order.shippingAddress}"></span></p>
                    </div>
                </div>

                <!-- Order Items -->
                <div>
                    <h2 class="text-xl font-semibold mb-4">Order Items</h2>
                    <div class="space-y-4">
                        <div th:each="item : ${order.orderItems}" class="flex justify-between items-center">
                            <div>
                                <span th:text="${item.product.name}" class="font-medium"></span>
                                <span class="text-gray-600" th:text="'x ' + ${item.quantity}"></span>
                            </div>
                            <span class="font-medium" th:text="'$' + ${#numbers.formatDecimal(item.price * item.quantity, 1, 2)}"></span>
                        </div>

                        <div class="border-t pt-4 mt-4">
                            <div class="flex justify-between mb-2">
                                <span class="font-semibold">Total with VAT:</span>
                                <span class="font-bold" th:text="'$' + ${#numbers.formatDecimal(order.totalWithVAT, 1, 2)}"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div th:if="${error}" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
            <p th:text="${error}"></p>
        </div>
    </section>
</body>
</html>
