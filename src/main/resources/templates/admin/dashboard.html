<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:with="pageTitle='Admin Dashboard'"> <!-- Setting pageTitle for admin-layout -->
<body>

    <!-- Replace the content placeholder in admin-layout.html -->
    <div th:replace="~{admin/layout/admin-layout :: content}">
        <!-- This specific content will be inserted into admin-layout's content placeholder -->
        <th:block>
            <h1 class="text-2xl font-bold mb-5" th:text="${pageTitle}">Admin Dashboard</h1>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Recent Orders Section -->
                <section class="bg-white p-6 rounded-lg shadow">
                    <h2 class="text-xl font-semibold mb-4">Recent Orders</h2>
                    <div th:if="${orders != null && !orders.isEmpty()}">
                        <ul class="space-y-2">
                            <li th:each="order : ${orders}" class="p-3 border rounded-md hover:bg-gray-50">
                                <p class="font-medium">Order Code: <span th:text="${order.orderCode}" class="font-normal text-blue-600">ESP-XXXX</span></p>
                                <p>Customer: <span th:text="${order.customerName}">Customer Name</span></p>
                                <p>Total: $<span th:text="${#numbers.formatDecimal(order.totalWithVAT, 1, 'COMMA', 2, 'POINT')}">0.00</span></p>
                                <p>Status: <span th:text="${order.status}" class="font-semibold"
                                                 th:classappend="${order.status == T(com.espressionist_ecommerce.model.OrderStatus).PENDING ? 'text-yellow-600' : 
                                                                  order.status == T(com.espressionist_ecommerce.model.OrderStatus).PROCESSING ? 'text-blue-600' :
                                                                  order.status == T(com.espressionist_ecommerce.model.OrderStatus).SHIPPED ? 'text-green-600' :
                                                                  order.status == T(com.espressionist_ecommerce.model.OrderStatus).DELIVERED ? 'text-gray-600' : 'text-red-600'}">
                                N/A</span></p>
                            </li>
                        </ul>
                    </div>
                    <div th:if="${orders == null || orders.isEmpty()}">
                        <p class="text-gray-500">No recent orders to display.</p>
                    </div>
                </section>

                <!-- Active Products Overview Section -->
                <section class="bg-white p-6 rounded-lg shadow">
                    <h2 class="text-xl font-semibold mb-4">Active Products Overview</h2>
                    <div th:if="${products != null && !products.isEmpty()}">
                        <p class="mb-3">Total active products: <span th:text="${#lists.size(products)}" class="font-bold">0</span>.</p>
                        <h3 class="text-lg font-medium mb-2">Few Product Examples:</h3>
                        <ul class="space-y-2">
                            <!-- Limiting to display max 5 products for brevity on dashboard -->
                            <li th:each="product, iterStat : ${products}" th:if="${iterStat.index < 5}" class="p-3 border rounded-md hover:bg-gray-50">
                                <p th:text="${product.name}" class="font-medium">Product Name</p>
                                <p>Price: $<span th:text="${#numbers.formatDecimal(product.price, 1, 'COMMA', 2, 'POINT')}">0.00</span>
                                 | Stock: <span th:text="${product.quantity}">0</span></p>
                            </li>
                        </ul>
                        <div th:if="${#lists.size(products) > 5}" class="mt-3">
                            <a th:href="@{/admin/products}" class="text-blue-500 hover:underline">View all products...</a>
                        </div>
                    </div>
                    <div th:if="${products == null || products.isEmpty()}">
                        <p class="text-gray-500">No active products to display.</p>
                    </div>
                </section>
            </div>
        </th:block>
    </div>

</body>
</html>
