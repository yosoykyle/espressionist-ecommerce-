<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:with="pageTitle='Manage Products'"> <!-- Setting pageTitle for admin-layout -->
<body>

    <!-- Replace the content placeholder in admin-layout.html -->
    <div th:replace="~{admin/layout/admin-layout :: content}">
        <!-- This specific content will be inserted into admin-layout's content placeholder -->
        <th:block>
            <div class="flex justify-between items-center mb-5">
                <h1 class="text-2xl font-bold" th:text="${pageTitle}">Manage Products</h1>
                <button class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                    Add New Product
                </button>
                <!-- This button would ideally trigger a modal or navigate to a create product page -->
                <!-- For now, it's a non-functional placeholder for the action -->
            </div>

            <div class="bg-white shadow-md rounded-lg overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Image</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Price</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Stock</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr th:if="${products == null || products.isEmpty()}">
                            <td colspan="6" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">No products found.</td>
                        </tr>
                        <tr th:each="product : ${products}">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <img th:if="${product.id != null}" th:src="@{'/api/products/' + ${product.id} + '/image'}" alt="Product Image" class="h-12 w-12 object-cover rounded"/>
                                <div th:if="${product.id == null || product.image == null}" class="h-12 w-12 bg-gray-200 flex items-center justify-center rounded text-xs text-gray-400">No Image</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900" th:text="${product.name}">Product Name</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"
                                      th:text="${product.category != null ? product.category.toString().replace('_', ' ') : 'N/A'}">
                                    Category
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-900" th:text="'$' + ${#numbers.formatDecimal(product.price, 1, 'COMMA', 2, 'POINT')}">$0.00</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-900" th:text="${product.quantity}">0</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                                <a href="#" class="text-indigo-600 hover:text-indigo-900">Edit</a>
                                <a href="#" class="text-green-600 hover:text-green-900">Image</a> <!-- Placeholder for image upload/change -->
                                <button type="button" class="text-red-600 hover:text-red-900">Archive</button> <!-- Placeholder for archive action -->
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </th:block>
    </div>

</body>
</html>
